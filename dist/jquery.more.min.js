(function(d,g){var a=d(g);var f="more";var i="a[data-more]";var c={loadingClass:"loading",noResults:"",success:function(){}};function b(k){var l=document.implementation.createHTMLDocument(""),j=l.documentElement,m;j.innerHTML=k;m=j.firstElementChild;if(j.childElementCount===1&&m.tagName.toLowerCase()==="html"){l.replaceChild(m,j)}return l}function e(l,k){var j=i;d(l).on("click",function(p){var m=d(p.target);if(!m.is(j)){m=m.parents(j)}if(!m.is(j)){return}p.preventDefault();var o=m.data("more");if(o){var n=m.data("href")||m.prop("href");var q=d(o);m.addClass(k.loadingClass);d.ajax({url:n,dataType:"html",success:function(v){m.removeClass(k.loadingClass);var w=b(v);var u=d(w).find("a[data-more='"+o+"']");var r=d(w).find(o).get(0);var t=false;if(u.length){m.prop("href",u.prop("href"));m.attr("data-href",u.attr("data-href"));if(d(r).has(u).length){m.insertAfter(u);u.remove()}}else{if(k.noResults){d("<span>"+k.noResults+"</span>").insertAfter(m)}t=true}if(r){var s=d(r.innerHTML);if(q.has(m).length){s.insertBefore(m)}else{q.append(s)}}if(t){m.remove()}if(s.length&&k.ready){k.ready.call(this,s)}}})}else{throw"content selector has not been specified"}return false})}var h=e;d.fn[f]=function(j){j=d.extend({},c,j);return this.each(function(){if(!d(this).data(f)){d(this).data(f,new h(this,j))}return d(this)})}})(jQuery,window);